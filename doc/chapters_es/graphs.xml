  <chapter id="c-graphs-plots">
    <title>Gráficos y Diagramas</title>

    <sect1 id="gnuplot-graphs">
      <title>Gráficos Gnuplot</title>

      <para>Los gráficos se generan llamando a un programa que es independiente de Gretl,
      <application>gnuplot</application>. Gnuplot es un programa muy completo
      para la realización de gráficos con múltiples opciones. Está disponible
      en <ulink url="http://www.gnuplot.info/">www.gnuplot.info</ulink> (no
      obstante téngase en cuenta que una copia de gnuplot se incluye con la
      versión MS Windows de <application>gretl</application>). Mediante un
      interfaz gráfico, <application>gretl</application> da acceso directo a
      sólo una pequeña parte de las opciones de gnuplot, pero intenta elegir
      valores razonables; también permite controlar todos los detalles del
      gráfico si así se desea.</para>

      <para>Los detalles para manejar los gráficos en
      <application>gretl</application> varían ligeramente entre Linux y MS
      Windows.</para>

      <para>En Linux, pulsando con el ratón sobre el gráfico se muestra un
      menú desplegable, que nos da la opción de guardar el gráfico en un
      archivo (bien como archivo postscript encapsulado o bien en formato
      PNG) o de guardarlo en la sesión actual <quote>como un icono</quote>. En la
      mayoría de los gráficos también tenemos la opción de usar el zoom para
      inspeccionar las áreas que nos interesen. Si <application>gretl</application>
      se construye con soporte <application>gnome</application> este menú
      también ofrece la posibilidad de imprimir el gráfico.</para>

      <para>En MS Windows, al hacer clic en la esquina superior-izquierda en
      la ventana del gráfico, se abre un menú desplegable de gnuplot que nos
      permite elegir entre varias opciones (incluyendo copiar el gráfico al
      portapapeles de Windows e imprimirlo). Este menú no incluye la opción de
      guardar el gráfico como un icono de sesión de
      <application>gretl</application> - para hacer esto, hay que cerrar la
      ventana del gráfico, y después, desde el menú de Sesión, elegir
      <quote>Añadir último gráfico</quote>. También se puede
      pulsar sobre el icono (en forma de una pequeña maquina de fotos) para
      hacer lo mismo.</para>

      <para>Una vez que se guarda el gráfico como un icono de sesión, se
      pueden realizar más cambios a la medida deseada. Para ello, hay que abrir la ventana de
      icono de sesión, pulsar el botón derecho del ratón sobre el nuevo icono
      del gráfico y elegir entre <quote>Editar utilizando
      GUI</quote> o <quote>Editar instrucciones de gráfico</quote>.
      La opción <quote>Editar utilizando GUI</quote> despliega un controlador gráfico
      de gnuplot que permite afinar varios aspectos del gráfico. La opción
      <quote>Editar instrucciones de gráfico</quote> abre una ventana del editor que
      contiene el archivo de las instrucciones de gnuplot para generar el gráfico:
      este proporciona control total sobre los detalles del gráfico - en el
      caso de que tengamos conocimientos de gnuplot. Para más información,
      ver el <ulink url="http://ricardo.ecn.wfu.edu/gnuplot.html">manual en linea
      </ulink> de gnuplot o ir a <ulink url="http://www.gnuplot.info/">www.gnuplot.info</ulink>.</para>

      <para>También consúltese la entrada <command>gnuplot</command> más adelante en el <xref
      linkend="c-cmdref" /> - y las instrucciones <command>graph</command> y
      <command>plot</command> para gráficos de ASCII <quote> rápidos, es decir, estilo borrador</quote>.</para>

      <figure id="fig-plot" float="1" pgwide="1">
        <title>Controlador gnuplot de <application>gretl</application></title>

        <screenshot>
          <screeninfo>Controlador gnuplot</screeninfo>

          <graphic align="center" fileref="figures/plot_control" />
        </screenshot>
      </figure>
    </sect1>

    <sect1 id="boxplots">
      <title>Gráficos de caja</title>

      <para>Los gráficos de caja (boxplots) no son generados por gnuplot, sino
      mediante <application>gretl</application>.</para>

      <para>Estos gráficos (llamados "boxplots" por Tukey y Chambers) muestran la
      distribución de una variable. La caja central abarca el 50 por ciento de
      los datos centrales, es decir, está flanqueada por el primer y el tercer
      cuartiles. Las <quote>patillas</quote> se extienden hasta los
      valores mínimos y máximos. Un línea atraviesa la caja por la mediana.</para>

      <para>En el caso de los gráficos de caja recortados (notched boxplots), el corte
      muestra los límites de confianza de aproximadamente el 90 por ciento.
      Esto se obtiene mediante el método bootstrap, lo cual puede tardar un
      rato si la serie es muy larga.</para>

      <para>Pulsando con el ratón en la ventana de los gráficos de caja (boxplots)
      se despliega un menú, que nos permite guardar los gráficos como
      postscript encapsulado (EPS), o como un archivo postscript de página
      completa. En el sistema de ventanas X también existe la posibilidad de
      guardar la ventana como un archivo XPM; y en MS Windows puede copiarse
      al portapapeles como un mapa de bits. El menú también da la opción de
      abrir una ventana de resumen, la cual muestra cinco valores de resumen
      (mínimo, primer cuartil, mediana, tercer cuartil y máximo), además de un
      intervalo de confianza para la mediana en el caso de que esté
      seleccionada la opción de <quote>gráficos de caja recortados</quote>.</para>

      <para>Algunos detalles de los gráficos de caja de
      <application>gretl</application> pueden controlarse mediante un archivo
      de texto llamado <filename>.boxplotrc</filename>, el
      programa busca este archivo en los siguientes sitios; primero, en la
      carpeta de trabajo actual, segundo, en la carpeta del usuario
      (correspondiente a la variable de entorno <envar>HOME</envar>), y por
      último, en la carpeta del usuario de <application>gretl</application>
      (esta última se muestra en el menú <quote>Archivo, Preferencias, General</quote>
      y puede ser cambiada). Las opciones que podemos seleccionar son las
      siguientes: primero, la fuente a utilizar en el archivo postscript
      resultante (el nombre genérico de la fuente tiene que ser válido para
      postscript; por defecto es Helvética); segundo, el tamaño de la fuente
      en puntos (también para la salida postscript, por defecto es 12);
      tercero, el mínimo y el máximo para el rango del eje, y la anchura y
      altura del gráfico en pixels (por defecto, 560 x 448); cuarto, si hay
      que imprimir los valores numéricos de los cuartiles y la media (por
      defecto, no imprimir), y por último, si los valores extremos o outliers
      (puntos más allá de 1,5 veces el rango recorrido intercuartílico desde la caja
      central) deben de indicarse por separado (por defecto, no).
      Veamos un ejemplo a continuación:</para>

      <programlisting>
font = Times-Roman fontsize = 16 max = 4.0 min = 0 width = 400
height = 448
numbers = %3.2f
outliers = true
      </programlisting>

      <para>En la penúltima linea, el valor asociado con <literal>numbers</literal>
      es una cadena en formato <quote>printf</quote> como en el lenguaje de
      programación C; si se especifica, este valor controla la impresión
      de la mediana y los cuartiles próximos al gráfico de caja. Si
      no hay entrada de <literal>numbers</literal> estos valores no se
      imprimen. En el ejemplo se imprimirán los valores hasta 3 dígitos, con
      la precisión de 2 dígitos a partir de la coma.</para>

      <para>No es necesario especificar todas las opciones y el orden tampoco
      importa. Las líneas que no siguen el esquema de <quote>clave = valor</quote>
      serán ignoradas, y también las líneas que empiecen con el símbolo
      <literal>#</literal>.</para>

      <para>Después de cada variable especificada en la instrucción del gráfico de
      caja, podemos añadir una expresión booleana entre paréntesis
      para delimitar la muestra de la variable en cuestión. Hay que insertar
      un espacio entre el nombre o el número de la variable y la expresión.
      Supongamos que tenemos datos de salarios de hombres y mujeres y tenemos
      la variable ficticia <literal>GÉNERO</literal> con el valor 1 para
      hombres y 0 para mujeres. En este caso, podemos dibujar gráficos de caja
      comparativos con la siguiente línea en el cuadro de diálogo:
      </para>

      <programlisting>
      salario (GÉNERO=1) salario (GÉNERO=0)
      </programlisting>
    </sect1>
  </chapter>

  <!-- Keep this comment at the end of the file
Local variables:
sgml-default-dtd-file:"../manual.ced"
mode: xml
sgml-parent-document:("../manual.xml" "book" "chapter")
End:
-->

